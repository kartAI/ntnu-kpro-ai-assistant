name: CD

on:
  workflow_run:
    workflows: ["CI"]  
    types:
      - completed

jobs:
  build:
    runs-on: ubuntu-latest

    # Only runs if CI was successful
    if: ${{ github.event.workflow_run.conclusion == 'success' }}  
    steps:
      - uses: actions/checkout@v4
      - name: Build the Docker image
        run: docker build . --file Dockerfile --tag ntnu-kpro-ai-assistant:$(date +%s)

      - name: Push the Docker image
        run: echo TODO Push the Docker image